<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ç™»å½• / æ³¨å†Œ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            min-height: 100vh;
            display: grid;
            place-items: center;
            background:
                    radial-gradient(1200px circle at 10% 10%, #7c3aed55, transparent 60%),
                    radial-gradient(1000px circle at 90% 20%, #06b6d455, transparent 55%),
                    radial-gradient(900px circle at 50% 90%, #22c55e44, transparent 60%),
                    linear-gradient(135deg, #0f172a, #111827);
            color: #e5e7eb;
            padding: 16px;
        }

        .auth-card{
            width: min(880px, 92vw);
            border-radius: 22px;
            border: 1px solid rgba(255,255,255,0.12);
            background: rgba(15,23,42,0.78);
            backdrop-filter: blur(10px);
            box-shadow: 0 20px 80px rgba(0,0,0,.45);
            display: grid;
            grid-template-columns: 1.1fr 1fr;
            overflow: hidden;
        }

        .left {
            padding: 36px;
            background: linear-gradient(160deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
        }
        .left h1{ font-size: 34px; margin-bottom: 10px;}
        .left p{ color: #cbd5e1; line-height: 1.6; }

        .right {
            padding: 28px;
            background: rgba(2,6,23,0.6);
        }

        .tab-btn{
            flex:1;
            border:0;
            padding:10px 0;
            background: transparent;
            color:#cbd5e1;
            font-weight:600;
            border-bottom:2px solid transparent;
            transition:.2s;
        }
        .tab-btn.active{
            color:#fff;
            border-bottom-color:#7c3aed;
        }

        label{ font-size:13px; color:#cbd5e1; margin-top:8px;}
        input{
            background: rgba(255,255,255,0.06)!important;
            border: 1px solid rgba(255,255,255,0.12)!important;
            color:#e5e7eb!important;
        }

        .hidden{ display:none; }

        @media (max-width: 760px){
            .auth-card{ grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>


<div class="auth-card">
    <!-- å·¦ä¾§ä»‹ç» -->
    <section class="left">
        <h1>ğŸ“š LibrarySystem</h1>
        <p>
            æ¬¢è¿æ¥åˆ°é˜¿é‡Œå›¾ä¹¦ç®¡ç†ç³»ç»Ÿã€‚<br/>
            å³ä¾§å¯ç›´æ¥åˆ‡æ¢ ç™»å½• / æ³¨å†Œã€‚<br/>
        </p>
    </section>

    <!-- å³ä¾§è¡¨å•åŒº -->
    <section class="right">
        <!-- tab -->
        <div class="d-flex mb-3">
            <button id="loginTab" class="tab-btn active" type="button">ç™»å½•</button>
            <button id="registerTab" class="tab-btn" type="button">æ³¨å†Œ</button>
        </div>

        <!-- ç™»å½•é”™è¯¯æç¤º -->
        <div class="alert alert-danger" th:if="${loginError}" th:text="${loginError}"></div>
        <!-- æ³¨å†Œé”™è¯¯æç¤º -->
        <div class="alert alert-danger" th:if="${registerError}" th:text="${registerError}"></div>

        <!-- ç™»å½•è¡¨å• -->
        <form id="loginForm" method="post" th:action="@{/login}">
            <label>ç”¨æˆ·å</label>
            <input class="form-control mb-2" name="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å"/>

            <label>å¯†ç </label>
            <input class="form-control mb-3" name="password" type="password" placeholder="è¯·è¾“å…¥å¯†ç "/>

            <button class="btn btn-primary w-100">ç«‹å³ç™»å½•</button>
        </form>

        <!-- æ³¨å†Œè¡¨å• -->
        <form id="registerForm" class="hidden" method="post" th:action="@{/register}">
            <label>ç”¨æˆ·å</label>
            <input class="form-control mb-2" name="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å"/>

            <label>å¯†ç </label>
            <input class="form-control mb-3" name="password" type="password" placeholder="è¯·è¾“å…¥å¯†ç "/>

            <button class="btn btn-success w-100">ç«‹å³æ³¨å†Œ</button>
        </form>

    </section>
</div>

<script>
    const loginTab = document.getElementById('loginTab');
    const registerTab = document.getElementById('registerTab');
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');

    function showLogin(){
        loginTab.classList.add('active');
        registerTab.classList.remove('active');
        loginForm.classList.remove('hidden');
        registerForm.classList.add('hidden');
    }
    function showRegister(){
        registerTab.classList.add('active');
        loginTab.classList.remove('active');
        registerForm.classList.remove('hidden');
        loginForm.classList.add('hidden');
    }

    loginTab.onclick = showLogin;
    registerTab.onclick = showRegister;

    // åç«¯æŒ‡å®šé»˜è®¤æ‰“å¼€å“ªä¸ª tab
    const defaultTab = "[[${defaultTab}]]";
    if(defaultTab === "register"){
        showRegister();
    } else {
        showLogin();
    }
</script>

</body>
</html>
